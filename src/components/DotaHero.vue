<template>    <v-container class="lighten-5">        <v-row >            <v-col>                <v-data-table                        :headers="headers"                        :items="desserts"                        :items-per-page='perPage'                        :hide-default-footer=true                        :loading=isLoad                        class="elevation-1"                ></v-data-table>                <div class="text-center">                    <v-pagination                            v-on:next="nextData"                            v-on:previous="previousData"                            v-on:input="inputData"                            class="mt-2"                            v-model="page"                            :length="totalPage"                    ></v-pagination>                </div>            </v-col>        </v-row>        <p>totalPage: {{totalPage}}</p>        <p>totalItems: {{totalItems}}</p>        <p>limit: {{limit}}</p>    </v-container></template><script>    const db  = require('../firebase/index')    export default {        name: "DotaHero",        data() {            return {                perPage:20,                totalPage:0,                limit:20,                page:1,                totalItems:0,                isLoad:true,                headers:[                    { text: 'Id', value: 'id' },                    { text: 'Name', value: 'name' },                    { text: 'Type', value: 'type' },                    { text: 'AttackType', value: 'attack_type' }                    ],                desserts:[],            }        },        created() {            this.initData()        },        methods:{            previousData: function () {                this.fetchHero({page:this.page-1, limit:20})            },            nextData: function () {                this.fetchHero({page:this.page-1, limit:20})            },            inputData: function (value) {                this.page=value;                this.fetchHero({page:this.page-1, limit:20})            },            initData: async function() {              let totalHero  = await db.db.collection('hero').get()                  .then((document) => document.docs.length)              this.totalPage = Math.ceil(totalHero/this.limit)              this.totalItems = totalHero;                let indexOf = 0                let get = db.db.collection('hero')                    .orderBy('id', 'asc')                return get.get()                    .then((document) => {                        let last = document.docs[indexOf]                        db.db.collection('hero')                            .orderBy('id', "asc")                            .startAt(last)                            .limit(this.limit)                            .get()                            .then((data) => {                                let List = [];                                data.forEach((v) => {                                    List.push({                                        id:+v.id,                                        attack_type:v.data().attack_type,                                        name:v.data().name,                                        type:v.data().type                                    })                                })                                this.desserts = List;                                this.isLoad = false                            })                    }).catch((err) => {                        console.log('err', err)                    })            },            fetchHero: async function({page=0, limit=20}) {                this.isLoad = true                let indexOf = this.totalPage * page                let get = db.db.collection('hero')                    .orderBy('id', 'asc')                return get.get()                    .then((document) => {                        let last = document.docs[indexOf]                        db.db.collection('hero')                            .orderBy('id', "asc")                            .startAt(last)                            .limit(limit)                            .get()                            .then((data) => {                                let List = [];                                data.forEach((v) => {                                    List.push({                                        id:+v.id,                                        attack_type:v.data().attack_type,                                        name:v.data().name,                                        type:v.data().type                                    })                                })                                this.desserts = List;                                this.isLoad = false                            })                    }).catch((err) => {                        console.log('err', err)                    })            },            createCollections: function () {                let batch = db.db.batch()                this.desserts.forEach((v) => {                    let doc = db.db.collection('hero').doc(v.id.toString())                    batch.set(doc, {                        id:v.id.toString(),                        name:v.localized_name,                        type:v.primary_attr,                        attack_type:v.attack_type                    })                })                batch.commit()                    .then(() => console.log('done'))                    .catch((err) => console.error(err))                return null            }        },        mounted:function mounted () {            fetch('https://api.opendota.com/api/heroes')                .then(response => response)                .then(async result => {                    let list = await result.json();                    this.desserts = list;                })        },    }</script><style scoped></style>